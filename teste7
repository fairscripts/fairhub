-- UI estilo pasta macOS + Scripts de Secrets/BrainrotGods/Test
-- Delta Executor

local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer or Players.PlayerAdded:Wait()
local CoreGui = game:GetService("CoreGui")

--========================================================--
-- Listas e estados
--========================================================--
local lists = {
    Secrets = {"La Vacca Saturno Saturnita","Karkerkar Kurkur","Chimpanzini Spiderini"},
    BrainrotGods = {"Cocofanto Elefanto","Girafa Celestre","Gattatino Neonino"},
    Test = {"Tung Tung Tung Sahur"}
}
local activeLists = {Secrets=false, BrainrotGods=false, Test=false}

--========================================================--
-- Funções auxiliares
--========================================================--
local function waitForCharacterParts(timeout)
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local ok = pcall(function() char:WaitForChild("Humanoid", timeout) end)
    local ok2 = pcall(function() char:WaitForChild("HumanoidRootPart", timeout) end)
    return char, (ok and char:FindFirstChildOfClass("Humanoid")), (ok2 and char:FindFirstChild("HumanoidRootPart"))
end

local firePromptFn = typeof(fireproximityprompt) == "function" and fireproximityprompt or typeof(fireProximityPrompt) == "function" and fireProximityPrompt

local function safeFirePrompt(prompt, holdTime)
    holdTime = holdTime or 2
    if not prompt or not prompt:IsA("ProximityPrompt") then return false end
    if firePromptFn then
        local ok, err = pcall(function() firePromptFn(prompt, holdTime) end)
        if ok then return true end
    end
    return false
end

local function acharPrompt(model)
    for _,desc in ipairs(model:GetDescendants()) do
        if desc:IsA("ProximityPrompt") then return desc end
    end
end

local function acharParteAlvo(model)
    local try = model:FindFirstChild("HumanoidRootPart") or model:FindFirstChild("RootPart") or model.PrimaryPart
    if try and try:IsA("BasePart") then return try end
    for _,v in ipairs(model:GetDescendants()) do
        if v:IsA("BasePart") then return v end
    end
end

local function seguirEInteragirAteSumir(model, displayName)
    local char, humanoid, hrp = waitForCharacterParts(5)
    if not char or not humanoid or not hrp then return end

    local lastPrint, lastFireTime, tentativas = 0, 0, 0
    local connection
    connection = RunService.Heartbeat:Connect(function()
        if not model or not model.Parent then connection:Disconnect() return end
        local targetPart = acharParteAlvo(model)
        if targetPart then
            local dist = (hrp.Position - targetPart.Position).Magnitude
            if dist > 2.2 then pcall(function() humanoid:MoveTo(targetPart.Position) end) end
        end
        local prompt = acharPrompt(model)
        if prompt and (hrp.Position - prompt.Parent.Position).Magnitude <= 10 and tentativas < 5 and tick() - lastFireTime >= 2 then
            safeFirePrompt(prompt, 2)
            tentativas += 1
            lastFireTime = tick()
        end
        if tentativas >= 5 or not prompt then connection:Disconnect() end
    end)
end

--========================================================--
-- Criar GUI
--========================================================--
if CoreGui:FindFirstChild("FairHubUI") then CoreGui.FairHubUI:Destroy() end
local gui = Instance.new("ScreenGui")
gui.Name = "FairHubUI"
gui.Parent = CoreGui
gui.ResetOnSpawn = false

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 300, 0, 220)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -110)
mainFrame.BackgroundColor3 = Color3.fromRGB(232,247,247)
mainFrame.BackgroundTransparency = 0.25
mainFrame.BorderSizePixel = 0
mainFrame.Parent = gui
mainFrame.Active = true
mainFrame.Draggable = true
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0,8)

local sidebar = Instance.new("Frame")
sidebar.Size = UDim2.new(0, 90, 1, 0)
sidebar.BackgroundColor3 = Color3.fromRGB(232,247,247)
sidebar.BackgroundTransparency = 0.25
sidebar.BorderSizePixel = 0
sidebar.Parent = mainFrame
Instance.new("UICorner", sidebar).CornerRadius = UDim.new(0,8)

local content = Instance.new("Frame")
content.Size = UDim2.new(1, -92, 1, 0)
content.Position = UDim2.new(0,92,0,0)
content.BackgroundColor3 = Color3.fromRGB(232,247,247)
content.BackgroundTransparency = 0.25
content.BorderSizePixel = 0
content.Parent = mainFrame
Instance.new("UICorner", content).CornerRadius = UDim.new(0,8)

-- Função para mostrar conteúdo no painel
local function showContent(text)
    content:ClearAllChildren()
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1,-10,1,-10)
    label.Position = UDim2.new(0,5,0,5)
    label.BackgroundTransparency = 1
    label.Text = text
    label.Font = Enum.Font.SourceSansBold
    label.TextSize = 24
    label.TextColor3 = Color3.fromRGB(0,128,128)
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.TextYAlignment = Enum.TextYAlignment.Top
    label.Parent = content
end

--========================================================--
-- Botões Sidebar
--========================================================--
local function createButton(name, yPos, callback)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1,-10,0,20)
    btn.Position = UDim2.new(0,5,0,yPos)
    btn.BackgroundColor3 = Color3.fromRGB(150,220,220)
    btn.BackgroundTransparency = 0.1
    btn.Text = name
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 14
    btn.TextColor3 = Color3.fromRGB(0,0,0)
    btn.BorderSizePixel = 0
    btn.Parent = sidebar
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0,4)
    btn.MouseButton1Click:Connect(callback)
    return btn
end

-- Criando botões
createButton("Main",30,function() showContent("Main") end)
createButton("Auto Farm",60,function() showContent("Auto Farm") end)
createButton("Secrets",90,function() showContent("Secrets") end)
createButton("BrainrotGods",120,function() showContent("BrainrotGods") end)
createButton("Test",150,function() showContent("Test") end)

--========================================================--
-- Botão verde para destruir GUI
--========================================================--
local topBar = Instance.new("Frame", mainFrame)
topBar.Size = UDim2.new(0,45,0,14)
topBar.Position = UDim2.new(1,-55,0,5)
topBar.BackgroundTransparency = 1

local dot = Instance.new("Frame", topBar)
dot.Size = UDim2.new(0,10,0,10)
dot.Position = UDim2.new(0,30,0,0)
dot.BackgroundColor3 = Color3.fromRGB(39,201,63)
Instance.new("UICorner",dot).CornerRadius = UDim.new(1,0)
local clickDetector = Instance.new("TextButton", dot)
clickDetector.Size = UDim2.new(1,0,1,0)
clickDetector.BackgroundTransparency = 1
clickDetector.Text = ""
clickDetector.MouseButton1Click:Connect(function()
    gui:Destroy()
end)

--========================================================--
-- Monitorar MovingAnimals e executar ações
--========================================================--
local movingAnimals = Workspace:WaitForChild("MovingAnimals")
movingAnimals.ChildAdded:Connect(function(model)
    if not model:IsA("Model") then return end
    task.wait(0.5)
    local infoFolder = model:FindFirstChild("HumanoidRootPart") and model.HumanoidRootPart:FindFirstChild("Info")
    local displayLabel = infoFolder and infoFolder:FindFirstChild("DisplayName",true)
    if not (displayLabel and displayLabel:IsA("TextLabel")) then return end
    local txt = displayLabel.Text or ""
    for listName, names in pairs(lists) do
        if activeLists[listName] then
            for _, name in ipairs(names) do
                if txt == name then
                    task.spawn(function()
                        seguirEInteragirAteSumir(model, txt)
                    end)
                    return
                end
            end
        end
    end
end)

--========================================================--
-- Abrir/Fechar GUI com G
--========================================================--
local visible = true
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.G then
        visible = not visible
        mainFrame.Visible = visible
    end
end)

print("[Script] GUI pronta e integração ativa!")
